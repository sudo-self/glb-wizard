<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glb Wizard - Advanced 3D Creator</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/exporters/GLTFExporter.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/FontLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/curves/CurveExtras.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/geometries/TextGeometry.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/TextureLoader.js"></script>
</head>
<body class="bg-gradient-to-br from-gray-50 to-blue-50 min-h-screen">
    <custom-navbar></custom-navbar>
    
    <main class="container mx-auto px-4 py-8">
        <div class="text-center mb-12">
            <h1 class="text-5xl font-bold text-gray-800 mb-4 bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600">
                GlbCraft Wizardry üßô‚Äç‚ôÇÔ∏è
            </h1>
            <p class="text-xl text-gray-600 max-w-2xl mx-auto">Create magical 3D models from text, images, or basic shapes with AI-powered enhancements</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- 3D Viewer -->
            <div class="lg:col-span-2 bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-200">
                <div class="bg-gradient-to-r from-gray-50 to-blue-50 p-4 border-b border-gray-200">
                    <div class="flex justify-between items-center">
                        <h3 class="text-lg font-semibold text-gray-700">3D Preview</h3>
                        <div class="flex space-x-2">
                            <button onclick="resetView()" class="px-3 py-1 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition text-sm">
                                <i data-feather="rotate-ccw" class="w-4 h-4 inline mr-1"></i>
                                Reset View
                            </button>
                            <button onclick="toggleWireframe()" class="px-3 py-1 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition text-sm">
                                <i data-feather="grid" class="w-4 h-4 inline mr-1"></i>
                                Wireframe
                            </button>
                        </div>
                    </div>
                </div>
                <div id="3d-container" class="w-full h-96 lg:h-[500px]"></div>
                <div class="bg-gradient-to-r from-gray-50 to-blue-50 p-4 border-t border-gray-200">
                    <div class="flex justify-between items-center text-sm text-gray-600">
                        <span>ü™Ñ Drag to rotate ‚Ä¢ Scroll to zoom ‚Ä¢ Right-click to pan</span>
                        <span id="poly-count" class="font-medium">0 polygons</span>
                    </div>
                </div>
            </div>

            <!-- Controls Panel -->
            <div class="space-y-6">
                <!-- Text to 3D Card -->
                <div class="bg-white rounded-2xl shadow-xl p-6 border border-gray-200">
                    <div class="flex items-center mb-4">
                        <i data-feather="type" class="w-6 h-6 text-indigo-600 mr-3"></i>
                        <h2 class="text-2xl font-semibold text-gray-800">Text to 3D</h2>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Enter text to generate 3D</label>
                        <div class="flex space-x-2">
                            <input 
                                type="text" 
                                id="textInput" 
                                placeholder="Type anything... (e.g., 'Dragon', 'Castle', 'Tree')" 
                                class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                            >
                            <button onclick="generateFromText()" class="px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition font-medium">
                                <i data-feather="zap" class="w-4 h-4 inline mr-2"></i>
                                Generate
                            </button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-2 mb-4">
                        <button onclick="createText3D('hello')" class="p-3 bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-700 rounded-lg hover:from-indigo-100 hover:to-purple-100 transition border border-indigo-100">
                            <i data-feather="message-square" class="w-4 h-4 mb-1"></i>
                            Hello
                        </button>
                        <button onclick="createText3D('love')" class="p-3 bg-gradient-to-r from-pink-50 to-red-50 text-pink-700 rounded-lg hover:from-pink-100 hover:to-red-100 transition border border-pink-100">
                            <i data-feather="heart" class="w-4 h-4 mb-1"></i>
                            Love
                        </button>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm text-gray-600 mb-1">Text Depth</label>
                        <input type="range" id="textDepth" min="0.1" max="2" step="0.1" value="0.5" class="w-full" oninput="updateTextDepth()">
                    </div>
                    
                    <div class="text-sm text-gray-500">
                        <i data-feather="info" class="w-4 h-4 inline mr-1"></i>
                        Creates 3D text from your input
                    </div>
                </div>

                <!-- Image to 3D Card -->
                <div class="bg-white rounded-2xl shadow-xl p-6 border border-gray-200">
                    <div class="flex items-center mb-4">
                        <i data-feather="image" class="w-6 h-6 text-green-600 mr-3"></i>
                        <h2 class="text-2xl font-semibold text-gray-800">Image to 3D</h2>
                    </div>
                    
                    <div class="mb-4">
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-indigo-400 transition">
                            <i data-feather="upload-cloud" class="w-12 h-12 text-gray-400 mx-auto mb-3"></i>
                            <input 
                                type="file" 
                                id="imageUpload" 
                                accept="image/*" 
                                class="hidden" 
                                onchange="handleImageUpload(event)"
                            >
                            <label for="imageUpload" class="cursor-pointer">
                                <span class="text-indigo-600 font-medium">Click to upload</span>
                                <span class="text-gray-500"> or drag and drop</span>
                            </label>
                            <p class="text-sm text-gray-400 mt-1">PNG, JPG, WEBP up to 5MB</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-3 mb-4">
                        <button onclick="generateFromSample('heightmap')" class="p-3 bg-gradient-to-r from-green-50 to-emerald-50 text-green-700 rounded-lg hover:from-green-100 hover:to-emerald-100 transition border border-green-100">
                            <i data-feather="mountain" class="w-4 h-4 mb-1"></i>
                            Terrain
                        </button>
                        <button onclick="generateFromSample('logo')" class="p-3 bg-gradient-to-r from-blue-50 to-cyan-50 text-blue-700 rounded-lg hover:from-blue-100 hover:to-cyan-100 transition border border-blue-100">
                            <i data-feather="star" class="w-4 h-4 mb-1"></i>
                            Logo
                        </button>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm text-gray-600 mb-1">Height Scale</label>
                        <input type="range" id="heightScale" min="0.1" max="5" step="0.1" value="1" class="w-full" oninput="updateHeightScale()">
                    </div>
                </div>

                <!-- Basic Shapes & Export Card -->
                <div class="bg-white rounded-2xl shadow-xl p-6 border border-gray-200">
                    <div class="flex items-center mb-6">
                        <i data-feather="box" class="w-6 h-6 text-orange-600 mr-3"></i>
                        <h2 class="text-2xl font-semibold text-gray-800">Shapes & Export</h2>
                    </div>
                    
                    <!-- Shape Selection -->
                    <div class="mb-6">
                        <h3 class="text-lg font-medium text-gray-700 mb-3">Primitive Shapes</h3>
                        <div class="grid grid-cols-4 gap-3">
                            <button onclick="createShape('box')" class="p-4 bg-gradient-to-br from-indigo-50 to-purple-50 text-indigo-700 rounded-xl hover:from-indigo-100 hover:to-purple-100 transition border border-indigo-100 hover:shadow-md">
                                <i data-feather="cube" class="w-6 h-6 mx-auto mb-2"></i>
                                <span class="text-sm font-medium">Cube</span>
                            </button>
                            <button onclick="createShape('sphere')" class="p-4 bg-gradient-to-br from-blue-50 to-cyan-50 text-blue-700 rounded-xl hover:from-blue-100 hover:to-cyan-100 transition border border-blue-100 hover:shadow-md">
                                <i data-feather="globe" class="w-6 h-6 mx-auto mb-2"></i>
                                <span class="text-sm font-medium">Sphere</span>
                            </button>
                            <button onclick="createShape('cylinder')" class="p-4 bg-gradient-to-br from-green-50 to-emerald-50 text-green-700 rounded-xl hover:from-green-100 hover:to-emerald-100 transition border border-green-100 hover:shadow-md">
                                <i data-feather="disc" class="w-6 h-6 mx-auto mb-2"></i>
                                <span class="text-sm font-medium">Cylinder</span>
                            </button>
                            <button onclick="createShape('torus')" class="p-4 bg-gradient-to-br from-pink-50 to-rose-50 text-pink-700 rounded-xl hover:from-pink-100 hover:to-rose-100 transition border border-pink-100 hover:shadow-md">
                                <i data-feather="circle" class="w-6 h-6 mx-auto mb-2"></i>
                                <span class="text-sm font-medium">Torus</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Color & Material -->
                    <div class="mb-6">
                        <h3 class="text-lg font-medium text-gray-700 mb-3">Material</h3>
                        <div class="flex items-center space-x-4 mb-4">
                            <div class="flex-1">
                                <label class="block text-sm text-gray-600 mb-1">Color</label>
                                <input type="color" id="customColor" class="w-full h-10 cursor-pointer rounded-lg" value="#4f46e5" onchange="changeColor(this.value)">
                            </div>
                            <div class="flex-1">
                                <label class="block text-sm text-gray-600 mb-1">Material Type</label>
                                <select id="materialType" class="w-full px-3 py-2 border border-gray-300 rounded-lg" onchange="changeMaterial()">
                                    <option value="phong">Shiny</option>
                                    <option value="lambert">Matte</option>
                                    <option value="basic">Flat</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-6 gap-2 mb-4">
                            <button onclick="changeColor('#FF5252')" class="w-8 h-8 bg-red-500 rounded-full hover:scale-110 transition-transform shadow-sm"></button>
                            <button onclick="changeColor('#4CAF50')" class="w-8 h-8 bg-green-500 rounded-full hover:scale-110 transition-transform shadow-sm"></button>
                            <button onclick="changeColor('#2196F3')" class="w-8 h-8 bg-blue-500 rounded-full hover:scale-110 transition-transform shadow-sm"></button>
                            <button onclick="changeColor('#FFC107')" class="w-8 h-8 bg-yellow-500 rounded-full hover:scale-110 transition-transform shadow-sm"></button>
                            <button onclick="changeColor('#9C27B0')" class="w-8 h-8 bg-purple-500 rounded-full hover:scale-110 transition-transform shadow-sm"></button>
                            <button onclick="changeColor('#FF4081')" class="w-8 h-8 bg-pink-500 rounded-full hover:scale-110 transition-transform shadow-sm"></button>
                        </div>
                    </div>
                    
                    <!-- Size Controls -->
                    <div class="mb-6">
                        <h3 class="text-lg font-medium text-gray-700 mb-3">Size Controls</h3>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between text-sm text-gray-600 mb-1">
                                    <span>Width</span>
                                    <span id="widthValue">1.0</span>
                                </div>
                                <input type="range" id="widthSlider" min="0.1" max="3" step="0.1" value="1" class="w-full" oninput="updateSize()">
                            </div>
                            <div>
                                <div class="flex justify-between text-sm text-gray-600 mb-1">
                                    <span>Height</span>
                                    <span id="heightValue">1.0</span>
                                </div>
                                <input type="range" id="heightSlider" min="0.1" max="3" step="0.1" value="1" class="w-full" oninput="updateSize()">
                            </div>
                            <div>
                                <div class="flex justify-between text-sm text-gray-600 mb-1">
                                    <span>Depth</span>
                                    <span id="depthValue">1.0</span>
                                </div>
                                <input type="range" id="depthSlider" min="0.1" max="3" step="0.1" value="1" class="w-full" oninput="updateSize()">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Export Section -->
                    <div>
                        <h3 class="text-lg font-medium text-gray-700 mb-3">Export Options</h3>
                        <div class="grid grid-cols-2 gap-3">
                            <button onclick="exportGLB()" class="py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition font-medium shadow-md hover:shadow-lg">
                                <i data-feather="download" class="w-5 h-5 inline mr-2"></i>
                                GLB ü™Ñ
                            </button>
                            <button onclick="exportSTL()" class="py-3 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-lg hover:from-gray-700 hover:to-gray-800 transition font-medium shadow-md hover:shadow-lg">
                                <i data-feather="download" class="w-5 h-5 inline mr-2"></i>
                                STL
                            </button>
                        </div>
                        <div class="mt-3 text-center">
                            <button onclick="shareModel()" class="text-sm text-indigo-600 hover:text-indigo-800 transition">
                                <i data-feather="share-2" class="w-4 h-4 inline mr-1"></i>
                                Share Model Link
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <custom-footer></custom-footer>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-2xl p-8 max-w-sm w-full mx-4 text-center">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"></div>
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Generating 3D Model</h3>
            <p class="text-gray-600" id="loadingMessage">This may take a moment...</p>
        </div>
    </div>

    <!-- Web Components -->
    <script src="components/navbar.js"></script>
    <script src="components/footer.js"></script>
    <script src="script.js"></script>
    <script>
        feather.replace();
        // Initialize with a more interesting start
        setTimeout(() => {
            createText3D('GLB');
        }, 100);
    </script>
</body>
</html>
